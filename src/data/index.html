<!doctype html>
<html lang="en">

<head>
	<title>AstroWeatherStation -- Configuration</title>
	<style>
		body { background-color: #bcc3cb; }
	</style>
	<script src="configuration.js"></script>
</head>
	
<body onload="display_values();">

	<div id="banner" style="display:flex;flex-direction: row">
		<div id="banner_general" style="margin-right:2px; border-top: 0px solid; border-left: 0px solid; border-right: 0px solid;background: #f6f6f6;padding: 10px;border-radius: 10px 10px 0px 0px;cursor: zoom-in" onclick="toggle_panel(0);">General</div>
		<div id="banner_network" style="margin-right:2px; border-top: 0px solid; border-left: 0px solid; border-right: 0px solid;background: #dbdbdb; padding: 10px;border-radius: 10px 10px 0px 0px;cursor: zoom-in" onclick="toggle_panel(1);">Network</div>
		<div id="banner_sensors" style="border-top: 0px solid; border-left: 0px solid; border-right: 0px solid;background: #dbdbdb; padding: 10px;border-radius: 10px 10px 0px 0px;cursor: zoom-in" onclick="toggle_panel(2);">Sensors</div>
		<div id="banner_controls" style="border-top: 0px solid; border-left: 0px solid; border-right: 0px solid;background: #dbdbdb; padding: 10px;border-radius: 10px 10px 0px 0px;cursor: zoom-in" onclick="toggle_panel(3);">Controls</div>
	</div>

	<div id="config_panel">

		<div id="general">

			<form method="post" action="" id="config"/>

			<table>
				<tr><th/></tr>
				<tr><td>TZ Name</td><td><input form="config" name="tzname" id="tzname" type="text" value="" size="35"/></td></tr>
				<tr><td>Dome control</td><td><input id="has_dome" form="config" name="has_dome" type="checkbox"/></td></tr>
				<caption/>
			</table>

		</div>
	
		<div id="network" style="flex-direction:line">

			<div>
				<table>
					<tr><th/></tr>
					<tr id="iface_option" style="display:none">
						<td>Preferred interface</td>
						<td>
							<input id="wifi" form="config" name="pref_iface" value="0" type="radio" onchange="show_wifi();"/> WiFi
							<input id="ethernet" form="config" name="pref_iface" value="2" type="radio" onchange="hide_wifi();"/> Ethernet
						</td>
					</tr>
					<tr id="show_alpaca_interface">
						<td>ASCOM ALPACA Interface</td>
						<td>
							<input id="alpaca_sta" form="config" name="alpaca_iface" value="0" type="radio"/> Station
							<input id="alpaca_ap" form="config" name="alpaca_iface" value="1" type="radio"/> AP
							<div style="display:none"><input id="alpaca_eth" form="config" name="alpaca_iface" value="2" type="radio"/></div>
						</td>
					</tr>
					<tr id="show_wifi_mode">
						<td>Mode</td>
						<td>
							<input id="Client" form="config" name="wifi_mode" value="0" type="radio" onchange="toggle_wifi_mode(0);"/> Station
							<input id="AP" form="config" name="wifi_mode" value="1" type="radio" onchange="toggle_wifi_mode(1);"/> AP
							<input id="Both" form="config" name="wifi_mode" value="2" type="radio" onchange="toggle_wifi_mode(2);"/> AP+Station
						</td>
					</tr>
					<tr id="show_sta_ssid">
						<td>Station SSID</td>
						<td><input form="config" id="sta_ssid" name="sta_ssid" type="text" value="" size="15"/></td>
					</tr>
					<tr id="show_wifi_sta_password">
						<td>Station Password</td>
						<td><input form="config" id="wifi_sta_password" name="wifi_sta_password" type="text" value="" size="15"/></td>
					</tr>
					<tr id="show_wifi_sta_ip_mode">
						<td>Station IP configuration</td>
						<td>
							<input form="config" id="wifi_sta_dhcp" name="wifi_sta_ip_mode" value="0" type="radio" onchange="toggle_sta_ipgw(0);"/> DHCP
							<input form="config" id="wifi_sta_fixed" name="wifi_sta_ip_mode" value="1" type="radio" onchange="toggle_sta_ipgw(1);"/> Fixed
						</td>
					</tr>
					<tr id="show_wifi_sta_ip">
						<td>Station IP</td>
						<td><input form="config" id="wifi_sta_ip" name="wifi_sta_ip" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_wifi_sta_gw">
						<td>Station IP gateway</td>
						<td><input form="config" id="wifi_sta_gw" name="wifi_sta_gw" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_wifi_sta_dns">
						<td>Station DNS</td>
						<td><input form="config" id="wifi_sta_dns" name="wifi_sta_dns" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_ap_ssid">
						<td>AP SSID</td>
						<td><input form="config" id="ap_ssid" name="ap_ssid" type="text" value="" size="15"/></td>
					</tr>
					<tr id="show_wifi_ap_password">
						<td>AP Password</td>
						<td><input form="config" id="wifi_ap_password" name="wifi_ap_password" type="text" value="" size="15"/></td>
					</tr>
					<tr id="show_wifi_ap_ip_mode">
						<td>AP IP configuration</td>
						<td>
							<input form="config" id="wifi_ap_dhcp" name="wifi_ap_ip_mode" value="0" type="radio"  onchange="toggle_ap_ipgw(0);"/> DHCP
							<input form="config" id="wifi_ap_fixed" name="wifi_ap_ip_mode" value="1" type="radio"  onchange="toggle_ap_ipgw(1);"/> Fixed
						</td>
					</tr>
					<tr id="show_wifi_ap_ip">
						<td>AP IP</td>
						<td><input form="config" id="wifi_ap_ip" name="wifi_ap_ip" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_wifi_ap_gw">
						<td>AP IP gateway</td>
						<td><input form="config" id="wifi_ap_gw" name="wifi_ap_gw" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_wifi_ap_dns">
						<td>AP DNS</td>
						<td><input form="config" id="wifi_ap_dns" name="wifi_ap_dns" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_eth_ip_mode">
						<td>Ethernet IP configuration</td>
						<td>
							<input form="config" id="eth_dhcp" name="eth_ip_mode" value="0" type="radio"  onchange="toggle_eth_ipgw(0);"/> DHCP
							<input form="config" id="eth_fixed" name="eth_ip_mode" value="1" type="radio"  onchange="toggle_eth_ipgw(1);"/> Fixed
						</td>
					</tr>
					<tr id="show_eth_ip">
						<td>Ethernet IP</td>
						<td><input form="config" id="eth_ip" name="eth_ip" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_eth_gw">
						<td>Ethernet IP gateway</td>
						<td><input form="config" id="eth_gw" name="eth_gw" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_eth_dns">
						<td>Ethernet DNS</td>
						<td><input form="config" id="eth_dns" name="eth_dns" value="" type="text" size="15"></td>
					</tr>
					<tr>
						<td>Remote server</td>
						<td><input form="config" name="remote_server" id="remote_server" type="text" value="" size="20"/></td>
					</tr>
					<tr>
						<td>URL Path</td>
						<td><input form="config" name="url_path" id="url_path" type="text" value="" size="20"/></td>
					</tr>
				<caption/>
				</table>
			</div>
			<div>
				<table>
					<tr><th/></tr>
					<tr>
						<td>ROOT CA</td>
						<td><textarea form="config" name="root_ca" id="root_ca" type="text" value="" style="height:544px;width:475px"></textarea></td>
					</tr>
				<caption/>
				</table>
			</div>
		</div>
		
		<div id="sensors">
	
			<table>
				<tr><th/></tr>
				<tr>
					<td>Temperature/Pressure/Humidity</td>
					<td><input form="config" name="has_bme" type="checkbox" id="has_bme"/></td>
				</tr>
				<tr>
					<td>Luminosity</td>
					<td><input form="config" name="has_tsl" type="checkbox" id="has_tsl"/></td>
				</tr>
				<tr>
					<td>Clouds</td>
					<td><input form="config" name="has_mlx" type="checkbox" id="has_mlx"/></td>
				</tr>
				<tr>
					<td>Wind speed</td>
					<td><input form="config" name="has_ws" type="checkbox" id="has_ws"/></td>
				</tr>
				<tr id="ws_config">
					<td> - Model</td>
					<td>
						<select form="config" name="anemometer_model" id="anemometer_model">
							<option id="ws_0" value="0">PR-3000-FSJT-N01</option>
							<option id="ws_1" value="1">GD-FS-RS485</option>
							<option id="ws_2" value="2">VMS-3003-CFSFX-N01</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>Wind direction</td>
					<td><input form="config" name="has_wv" type="checkbox" id="has_wv"/></td>
				</tr>
				<tr id="wv_config">
					<td> - Model</td>
					<td>
						<select form="config" name="windvane_model" id="windvane_model">
							<option id="wv_0" value="0">PR-3000-FXJT-N01</option>
							<option id="wv_1" value="1">GD-FX-RS485</option>
							<option id="wv_2" value="2">VMS-3003-CFSFX-N01</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>Rain</td>
					<td><input form="config" name="has_rain_sensor" type="checkbox" id="has_rain_sensor"/></td>
				</tr>
				<tr>
					<td>GPS</td>
					<td><input form="config" name="has_gps" type="checkbox" id="has_gps"/></td>
				</tr>
				<caption/>
			</table>
		</div>

		<div style="flex-direction: column" id="controls">

			<table style="width: 30%">
				<tr><th>Criteria</th><th>Active</th><th>Value</th></tr>
				<tr>
					<td>Wind speed</td>
					<td><input form="config" type="checkbox" name="safety_wind_speed_active" id="safety_wind_speed_active"></td>
					<td>&le; <input form="config" type="text" name="safety_wind_speed_max" id="safety_wind_speed_max" size="4" value="1.0"> m/s</td>
				</tr>
				<tr>
					<td>Cloud coverage</td>
					<td><input form="config" type="checkbox" name="safety_cloud_coverage" id="safety_cloud_coverage"></td>
					<td>&le; 
						<select form="config" name="safety_cloud_coverage_max">
							<option default="1" value="0">Clear</option>
							<option value="1">Cloudy</option>
							<option value="2">Overcast</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>Rain intensity</td>
					<td><input form="config" type="checkbox" name="safety_rain_intensity" id="safety_rain_intensity"></td>
					<td>&le; 
						<select form="config" name="safety_rain_intensity_max">
							<option value="0">Dry</option>
							<option value="1">Rain drops</option>
							<option value="2">Very light</option>
							<option value="3">Medium light</option>
							<option value="4">Medium</option>
							<option value="5">Medium heavy</option>
							<option value="6">Heavy</option>
							<option value="7">Violent</option>
						</select>
					</td>

				</tr>
				<tr>
					<td id="safety_monitor">Safety monitor enabled</td>
					<td><input form="config" type="checkbox" name="safety_on" onclick="toggle_safety_monitor();"></td>
				</tr>
				<caption/>
			</table>
			<br><p>When the active criteria are met, the conditions are <b>safe</b></p>
		</div>

		<div id="apply">
			<input type="button" onclick="send_config();" id="toto" form="config" value="Apply">
			<p style="font-weight: bold" id="feedback"></p>
		</div>
	
	</div>
</body>
</html>
