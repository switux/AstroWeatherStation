<!doctype html>
<html lang="en">
<head>
	<title>
		AstroWeatherStation -- Configuration
	</title>
	<style>
			body { background-color: #bcc3cb; }
	</style>
	<script src="configuration.js"></script>
</head>
	
<body onload="display_values();">

	<div id="banner" style="display:flex;flex-direction: row">
		<div id="banner_general" style="margin-right:2px; border-top: 0px solid; border-left: 0px solid; border-right: 0px solid;background: #f6f6f6;padding: 10px;border-radius: 10px 10px 0px 0px;cursor: zoom-in" onclick="toggle_panel(0);">General</div>
		<div id="banner_network" style="margin-right:2px; border-top: 0px solid; border-left: 0px solid; border-right: 0px solid;background: #dbdbdb; padding: 10px;border-radius: 10px 10px 0px 0px;cursor: zoom-in" onclick="toggle_panel(1);">Network</div>
		<div id="banner_sensors" style="border-top: 0px solid; border-left: 0px solid; border-right: 0px solid;background: #dbdbdb; padding: 10px;border-radius: 10px 10px 0px 0px;cursor: zoom-in" onclick="toggle_panel(2);">Sensors</div>
		<div id="banner_controls" style="border-top: 0px solid; border-left: 0px solid; border-right: 0px solid;background: #dbdbdb; padding: 10px;border-radius: 10px 10px 0px 0px;cursor: zoom-in" onclick="toggle_panel(3);">Controls</div>
	</div>

	<div id="config_panel">

		<div id="general">

			<form method="post" action="" id="config"/>

			<table aria-describedby="General config">
				<tr><th/></tr>
				<tr><td>TZ Name</td><td><input form="config" name="tzname" id="tzname" type="text" value="" size="35"/></td></tr>
				<tr><td>Dome control</td><td><input id="has_dome" form="config" name="has_dome" type="checkbox"/></td></tr>
			</table>

		</div> <!-- general -->
	
		<div id="network" style="flex-direction:line">

			<div>
				<table aria-describedby="Network config">
					<tr><th/></tr>
					<tr id="iface_option" style="display:none">
						<td>Preferred interface</td>
						<td>
							<input id="wifi" form="config" name="pref_iface" value="0" type="radio" onchange="show_wifi();"/> WiFi
							<input id="ethernet" form="config" name="pref_iface" value="2" type="radio" onchange="hide_wifi();"/> Ethernet
						</td>
					</tr>
					<tr id="show_alpaca_interface">
						<td>ASCOM ALPACA Interface</td>
						<td>
							<input id="alpaca_sta" form="config" name="alpaca_iface" value="0" type="radio"/> Station
							<input id="alpaca_ap" form="config" name="alpaca_iface" value="1" type="radio"/> AP
							<div style="display:none"><input id="alpaca_eth" form="config" name="alpaca_iface" value="2" type="radio"/></div>
						</td>
					</tr>
					<tr id="show_wifi_mode">
						<td>Mode</td>
						<td>
							<input id="Client" form="config" name="wifi_mode" value="0" type="radio" onchange="toggle_wifi_mode(0);"/> Station
							<input id="AP" form="config" name="wifi_mode" value="1" type="radio" onchange="toggle_wifi_mode(1);"/> AP
							<input id="Both" form="config" name="wifi_mode" value="2" type="radio" onchange="toggle_wifi_mode(2);"/> AP+Station
						</td>
					</tr>
					<tr id="show_sta_ssid">
						<td>Station SSID</td>
						<td><input form="config" id="sta_ssid" name="wifi_sta_ssid" type="text" value="" size="15"/></td>
					</tr>
					<tr id="show_wifi_sta_password">
						<td>Station Password</td>
						<td><input form="config" id="wifi_sta_password" name="wifi_sta_password" type="text" value="" size="15"/></td>
					</tr>
					<tr id="show_wifi_sta_ip_mode">
						<td>Station IP configuration</td>
						<td>
							<input form="config" id="wifi_sta_dhcp" name="wifi_sta_ip_mode" value="0" type="radio" onchange="toggle_sta_ipgw(0);"/> DHCP
							<input form="config" id="wifi_sta_fixed" name="wifi_sta_ip_mode" value="1" type="radio" onchange="toggle_sta_ipgw(1);"/> Fixed
						</td>
					</tr>
					<tr id="show_wifi_sta_ip">
						<td>Station IP</td>
						<td><input form="config" id="wifi_sta_ip" name="wifi_sta_ip" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_wifi_sta_gw">
						<td>Station IP gateway</td>
						<td><input form="config" id="wifi_sta_gw" name="wifi_sta_gw" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_wifi_sta_dns">
						<td>Station DNS</td>
						<td><input form="config" id="wifi_sta_dns" name="wifi_sta_dns" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_ap_ssid">
						<td>AP SSID</td>
						<td><input form="config" id="ap_ssid" name="wifi_ap_ssid" type="text" value="" size="15"/></td>
					</tr>
					<tr id="show_wifi_ap_password">
						<td>AP Password</td>
						<td><input form="config" id="wifi_ap_password" name="wifi_ap_password" type="text" value="" size="15"/></td>
					</tr>
					<tr id="show_wifi_ap_ip_mode">
						<td>AP IP configuration</td>
						<td>
							<input form="config" id="wifi_ap_dhcp" name="wifi_ap_ip_mode" value="0" type="radio"  onchange="toggle_ap_ipgw(0);"/> DHCP
							<input form="config" id="wifi_ap_fixed" name="wifi_ap_ip_mode" value="1" type="radio"  onchange="toggle_ap_ipgw(1);"/> Fixed
						</td>
					</tr>
					<tr id="show_wifi_ap_ip">
						<td>AP IP</td>
						<td><input form="config" id="wifi_ap_ip" name="wifi_ap_ip" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_wifi_ap_gw">
						<td>AP IP gateway</td>
						<td><input form="config" id="wifi_ap_gw" name="wifi_ap_gw" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_wifi_ap_dns">
						<td>AP DNS</td>
						<td><input form="config" id="wifi_ap_dns" name="wifi_ap_dns" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_eth_ip_mode">
						<td>Ethernet IP configuration</td>
						<td>
							<input form="config" id="eth_dhcp" name="eth_ip_mode" value="0" type="radio"  onchange="toggle_eth_ipgw(0);"/> DHCP
							<input form="config" id="eth_fixed" name="eth_ip_mode" value="1" type="radio"  onchange="toggle_eth_ipgw(1);"/> Fixed
						</td>
					</tr>
					<tr id="show_eth_ip">
						<td>Ethernet IP</td>
						<td><input form="config" id="eth_ip" name="eth_ip" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_eth_gw">
						<td>Ethernet IP gateway</td>
						<td><input form="config" id="eth_gw" name="eth_gw" value="" type="text" size="15"></td>
					</tr>
					<tr id="show_eth_dns">
						<td>Ethernet DNS</td>
						<td><input form="config" id="eth_dns" name="eth_dns" value="" type="text" size="15"></td>
					</tr>
					<tr>
						<td>Remote server</td>
						<td><input form="config" name="remote_server" id="remote_server" type="text" value="" size="20"/></td>
					</tr>
					<tr>
						<td>URL Path</td>
						<td><input form="config" name="url_path" id="url_path" type="text" value="" size="20"/></td>
					</tr>
				</table>
			</div>
			<div>
				<table aria-describedby="ROOT CA">
					<tr><th/></tr>
					<tr>
						<td>ROOT CA</td>
						<td><textarea form="config" name="root_ca" id="root_ca" style="height:544px;width:475px"></textarea></td>
					</tr>
				</table>
			</div>
		</div> <!-- network -->
		
		<div id="sensors">
	
			<table aria-describedby="Sensors config">
				<tr><th/></tr>
				<tr>
					<td>Temperature/Pressure/Humidity</td>
					<td><input form="config" name="has_bme" type="checkbox" id="has_bme"/></td>
				</tr>
				<tr>
					<td>Luminosity</td>
					<td><input form="config" name="has_tsl" type="checkbox" id="has_tsl"/></td>
				</tr>
				<tr>
					<td>Clouds</td>
					<td><input form="config" name="has_mlx" type="checkbox" id="has_mlx"/></td>
				</tr>
				<tr>
					<td>Wind speed</td>
					<td><input form="config" name="has_ws" type="checkbox" id="has_ws"/></td>
				</tr>
				<tr id="ws_config">
					<td> - Model</td>
					<td>
						<select form="config" name="anemometer_model" id="anemometer_model">
							<option id="ws_0" value="0">PR-3000-FSJT-N01</option>
							<option id="ws_1" value="1">GD-FS-RS485</option>
							<option id="ws_2" value="2">VMS-3003-CFSFX-N01</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>Wind direction</td>
					<td><input form="config" name="has_wv" type="checkbox" id="has_wv"/></td>
				</tr>
				<tr id="wv_config">
					<td> - Model</td>
					<td>
						<select form="config" name="wind_vane_model" id="wind_vane_model">
							<option id="wv_0" value="0">PR-3000-FXJT-N01</option>
							<option id="wv_1" value="1">GD-FX-RS485</option>
							<option id="wv_2" value="2">VMS-3003-CFSFX-N01</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>Rain</td>
					<td><input form="config" name="has_rain_sensor" type="checkbox" id="has_rain_sensor"/></td>
				</tr>
				<tr>
					<td>GPS</td>
					<td><input form="config" name="has_gps" type="checkbox" id="has_gps"/></td>
				</tr>
			</table>
		</div> <!-- sensors -->

		<div id="lookout" style="display: flex; flex-direction: column">

			<div id="enabled" style="text-align:center; width:15%; display:flex; border: 2px solid; border-color: red; border-radius: 5px; margin: 10px">
				<p style="font-weight: bold;color: red;display:inline-block;margin: auto; padding: 20px">Lookout enabled : <input form="config" type="checkbox" name="lookout_enabled" id="lookout_enabled" onclick="toggle_lookout();"></p>
			</div> <!-- enabled -->
			
			<div id="conditions" style="flex-direction: row;display: flex; margin: 10px">
				<div id="unsafe" style="width: 40%;border:2px solid; border-radius: 10px; padding: 10px; background-color: #e0cccc">
					<p style="font-weight: bold;text-align: center">Unsafe conditions</p>
					<table style="width: 100%;border: 1px solid; border-color: #000000;border-radius:10px;margin: 5px" aria-describedby="Controls config">
						<tr style="border-bottom: 3px solid"><th style="border-bottom: 1px solid">Criteria</th><th style="border-bottom: 1px solid">Active</th><th style="border-bottom: 1px solid">Value</th><th style="border-bottom: 1px solid">Delay</th></tr>
						<tr>
							<td>Wind speed 1</td>
							<td><input form="config" type="checkbox" name="unsafe_wind_speed_active_1" id="unsafe_wind_speed_active_1"></td>
							<td>&ge; <input form="config" type="text" name="unsafe_wind_speed_max_1" id="unsafe_wind_speed_max_1" size="4" value="1.0"> m/s</td>
							<td>&gt;= <input form="config" type="text" name="unsafe_wind_speed_delay_1" id="unsafe_wind_speed_delay_1" size="4" value="0"> s</td>
						</tr>
						<tr>
							<td>Wind speed 2</td>
							<td><input form="config" type="checkbox" name="unsafe_wind_speed_active_2" id="unsafe_wind_speed_active_2"></td>
							<td>&ge; <input form="config" type="text" name="unsafe_wind_speed_max_2" id="unsafe_wind_speed_max_2" size="4" value="1.0"> m/s</td>
							<td>&gt;= <input form="config" type="text" name="unsafe_wind_speed_delay_2" id="unsafe_wind_speed_delay_2" size="4" value="0"> s</td>
						</tr>
						<tr>
							<td>Cloud coverage 1</td>
							<td><input form="config" type="checkbox" name="unsafe_cloud_coverage_active_1" id="unsafe_cloud_coverage_active_1"></td>
							<td>&ge; 
								<select form="config" name="unsafe_cloud_coverage_max_1" id="unsafe_cloud_coverage_max_1">
									<option value="0" selected>Clear</option>
									<option value="1">Cloudy</option>
									<option value="2">Overcast</option>
								</select>
							<td>&gt;= <input form="config" type="text" name="unsafe_cloud_coverage_delay_1" id="unsafe_cloud_coverage_delay_1" size="4" value="0"> s</td>
						</tr>
						<tr>
							<td>Cloud coverage 2</td>
							<td><input form="config" type="checkbox" name="unsafe_cloud_coverage_active_2" id="unsafe_cloud_coverage_active_2"></td>
							<td>&ge; 
								<select form="config" name="unsafe_cloud_coverage_max_2" id="unsafe_cloud_coverage_max_2">
									<option value="0" selected>Clear</option>
									<option value="1">Cloudy</option>
									<option value="2">Overcast</option>
								</select>
							</td>
							<td>&gt;= <input form="config" type="text" name="unsafe_cloud_coverage_delay_2" id="unsafe_cloud_coverage_delay_2" size="4" value="0"> s</td>
						</tr>
						<tr>
							<td>Rain intensity</td>
							<td><input form="config" type="checkbox" name="unsafe_rain_intensity_active" id="unsafe_rain_intensity_active"></td>
							<td>&gt; 
								<select form="config" name="unsafe_rain_intensity_max" id="unsafe_rain_intensity_max">
									<option value="0" selected>Dry</option>
									<option value="1">Rain drops</option>
									<option value="2">Very light</option>
									<option value="3">Medium light</option>
									<option value="4">Medium</option>
									<option value="5">Medium heavy</option>
									<option value="6">Heavy</option>
									<option value="7">Violent</option>
								</select>
							</td>
						</tr>
					</table>
					<p>Once conditions are considered as unsafe, they will remain alike until safe conditions are met</p>
				</div> <!-- unsafe -->
				<div id="safe" style="width: 40%;border:2px solid; border-radius: 10px; padding: 10px; background-color: #cce0cc;margin-left: 10px">
					<p style="font-weight: bold;text-align: center">Safe conditions</p>
					<table style="width: 100%;border: 1px solid; border-color: #000000;border-radius:10px;margin: 5px" aria-describedby="Controls config">
						<tr style="border-bottom: 3px solid"><th style="border-bottom: 1px solid">Criteria</th><th style="border-bottom: 1px solid">Active</th><th style="border-bottom: 1px solid">Value</th><th style="border-bottom: 1px solid">Delay</th></tr>
						<tr>
							<td>Wind speed</td>
							<td><input form="config" type="checkbox" name="safe_wind_speed_active" id="safe_wind_speed_active"></td>
							<td>&le; <input form="config" type="text" name="safe_wind_speed_max" id="safe_wind_speed_max" size="4" value="1.0"> m/s</td>
							<td>&gt;= <input form="config" type="text" name="safe_wind_speed_delay" id="safe_wind_speed_delay" size="4" value="0"> s</td>
						</tr>
						<tr>
							<td>Cloud coverage 1</td>
							<td><input form="config" type="checkbox" name="safe_cloud_coverage_active_1" id="safe_cloud_coverage_active_1"></td>
							<td>&le; 
								<select form="config" name="safe_cloud_coverage_max_1" id="safe_cloud_coverage_max_1">
									<option value="0" selected>Clear</option>
									<option value="1">Cloudy</option>
									<option value="2">Overcast</option>
								</select>
							<td>&gt;= <input form="config" type="text" name="safe_cloud_coverage_delay_1" id="safe_cloud_coverage_delay_1" size="4" value="0"> s</td>
						</tr>
						<tr>
							<td>Cloud coverage 2</td>
							<td><input form="config" type="checkbox" name="safe_cloud_coverage_active_2" id="safe_cloud_coverage_active_2"></td>
							<td>&le; 
								<select form="config" name="safe_cloud_coverage_max_2" id="safe_cloud_coverage_max_2">
									<option value="0" selected>Clear</option>
									<option value="1">Cloudy</option>
									<option value="2">Overcast</option>
								</select>
							</td>
							<td>&gt;= <input form="config" type="text" name="safe_cloud_coverage_delay_2" id="safe_cloud_coverage_delay_2" size="4" value="0"> s</td>
						</tr>
						<tr>
							<td>Rain intensity</td>
							<td><input form="config" type="checkbox" name="safe_rain_intensity_active" id="safe_rain_intensity_active"></td>
							<td>&le; 
								<select form="config" name="safe_rain_intensity_max" id="safe_rain_intensity_max">
									<option value="0" selected>Dry</option>
									<option value="1">Rain drops</option>
									<option value="2">Very light</option>
									<option value="3">Medium light</option>
									<option value="4">Medium</option>
									<option value="5">Medium heavy</option>
									<option value="6">Heavy</option>
									<option value="7">Violent</option>
								</select>
							</td>
							<td>&gt;= <input form="config" type="text" name="safe_rain_intensity_delay" id="safe_rain_intensity_delay" size="4" value="0"> s</td>
						</tr>
					</table>
					<p>If no safe conditions are set, the lookout will not take action to switch back to safe mode</p>
				</div> <!-- unsafe -->
			</div> <!-- conditions -->
		</div>
		<div id="apply">
			<input type="button" onclick="send_config();" id="toto" form="config" value="Apply">
			<p style="font-weight: bold" id="feedback"></p>
		</div>
	
	</div> <!-- lookout -->
</body>
</html>
